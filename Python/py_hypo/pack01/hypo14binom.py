'''
    ì´í•­ ê²€ì •
      ë‘ ê°€ì§€ ê°’ì„ ê°€ì§€ëŠ” í™•ë¥ ë³€ìˆ˜ì˜ ë¶„í¬ë¥¼ íŒë‹¨ í•˜ëŠ”ë° íš¨ê³¼ì ì´ë‹¤.
      ex) 10ëª…ì˜ ìê²©ì¦ ì‹œí—˜ í•©ê²©ì ì¤‘ ë‚¨ìê°€ 6ëª…ì´ì—ˆë‹¤ê³  í•  ë•Œ 'ë‚¨ìê°€ ì—¬ìë³´ë‹¤ í•©ê²©ë¥ ì´ ë†’ë‹¤ê³  í•  ìˆ˜ ìˆëŠ”ê°€?'
      
    binom test
'''
import pandas as pd
import scipy.stats as stats

data = pd.read_csv('../testdata/one_sample.csv')
# print(data.survey.unique()) #[1, 0] 

# crosstab ì‘ì„±
ctab = pd.crosstab(index=data.survey, columns='count')
ctab.index = ['ë¶ˆë§Œì¡±', 'ë§Œì¡±']
print(ctab) # êµìœ¡ í›„ êµìœ¡ ë§Œì¡± ì—¬ë¶€ êµì°¨í‘œë¼ê³  ê°€ì •, ë¶ˆë§Œì¡±:14, ë§Œì¡±:136

''' ì–‘ì¸¡ê²€ì • : ë°©í–¥ì„±ì´ ì—†ë‹¤. ê¸°ì¡´ 80% ë§Œì¡±ì„ ê¸°ì¤€ ê²€ì¦ ì‹¤ì‹œ
    ì–‘ì¸¡ê²€ì •ì—ì„œëŠ” ê¸°ì¡´ ë§Œì¡±ë¥ ë³´ë‹¤ í¬ë‹¤, ì‘ë‹¤ ë¼ëŠ” ë°©í–¥ì„±ì„ ì œì‹œí•˜ì§€ ì•ŠëŠ”ë‹¤. '''
# stats.binom_test(ì„±ê³µë˜ëŠ”ì‹¤íŒ¨ìˆ˜, ì‹œë„íšŸìˆ˜, ê°€ì„¤í™•ë¥ , ê²€ì •ë°©ì‹)
x = stats.binom_test([136, 14], p=0.8, alternative='two-sided') #alternative='two-sided
print(x) # 0.000673 < 0.05 ê·€ë¬´ ê¸°ê°

# ğŸ“Œ ê¸°ì¡´(80%) ë§Œì¡±ìœ¨ê³¼ ì°¨ì´ê°€ ìˆë‹¤.

'''  ì–‘ì¸¡ê²€ì •ì—ì„œ ë°©í–¥ì„ ë‹¤ë¥´ê²Œ ì£¼ë©´ ë¹„ìœ¨ë„ ë‹¤ë¥´ê²Œ ì¤Œ    '''
x = stats.binom_test([14, 136], p=0.2, alternative='two-sided') #alternative='two-sided
print(x) # 0.000673 < 0.05 ê·€ë¬´ ê¸°ê°

# ğŸ“Œ ê¸°ì¡´(80%) ë§Œì¡±ìœ¨ê³¼ ì°¨ì´ê°€ ìˆë‹¤.


'''  ë‹¨ì¸¡ ê²€ì • : ë°©í–¥ì„±ì´ ìˆë‹¤.    '''
x = stats.binom_test([136, 14], p=0.8, alternative='greater') # ìš°ì¸¡ê²€ì •
print(x) # 0.000317 < 0.05 ê·€ë¬´ ê¸°ê°

x = stats.binom_test([14, 136], p=0.2, alternative='less') # ì¢Œì¸¡ê²€ì •
print(x) # 0.000317 < 0.05 ê·€ë¬´ ê¸°ê°

# ğŸ“Œ ê¸°ì¡´(80%) ë§Œì¡±ìœ¨ ì´ìƒì˜ ì°¨ì´ê°€ ìˆë‹¤. ë”°ë¼ì„œ ê¸°ì¡´ 20%ë³´ë‹¤ ë¶ˆë§Œìœ¨ì´ ì‘ì•„ì¡Œë‹¤ë¼ê³  í•  ìˆ˜ ìˆë‹¤.